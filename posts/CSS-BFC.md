---
title: 'CSS-BFC问题'

date: '2021-03-06'

kind: 'Base'
---



### 什么是 BFC

> 块格式化上下文（Block Formatting Context，BFC） 是Web页面的可视CSS渲染的一部分，是块盒子的布局过程发生的区域，也是浮动元素与其他元素交互的区域。 --------MDN

下列方式会创建**块格式化上下文**：(只列出比较多出现的)

- 根元素```<html>```
- 浮动元素```float``` 不是none
- 绝对定位```position``` 为```absolute```和```fixed```
- ```overflow``` 不为```visible``` (visible是它的默认值)
- 非块级元素具有```display: inline-block，table-cell, table-caption, flex, inline-flex```

#### BFC布局规矩

- 内部盒子默认**垂直安放**
- 垂直方向(上下布局)的margin会发生折叠, 如 上面的盒子```margin-bottom: 100px ``` , 下面的盒子 ```margin-top: 100px```, 两个盒子只会margin 100px (哪个margin值大,就决定他们的margin)
- 水平方向(左右布局)的**margin-left**和父容器的**border-left**相互接触,如: 右边的盒子margin-left不足距离接触border-left,则**不会生效**
- BFC区域**不会**和 ```float```的盒子**重叠**
- BFC的高度会将浮动元素也计算在内

### 有什么用

1. **让浮动内容和周围内容等高(一说是 父容器高度塌陷)**

   浮动内容如果大于盒子,那么就需要生成BFC,使得浮动内容**不越过** 盒子,我们可以使用 ```overflow: auto```	实现;也可以在内容下方插入```clear: both```  清除.实际上都是建立一个BFC

2. 防止 **外边距(margin) 折叠** 

   外边距合并是指: 相邻的两个盒子的外边距相互覆盖,导致边距距离变小;

   	1. 两者margin为**正数**时,折叠结果就是它们两个中的最大值
    	2. 两者margin为**负数**时,折叠结果就是它们两个**绝对值**较大的
    	3. 一正一负,折叠结果为相加之和

   解决: 在其中一个盒子外面包一个BFC,BFC内部是独立的盒子,margin不会被合并

3. BFC 阻止元素**被浮动元素覆盖**

   如果一个盒子里有一个```float: left``` 的元素浮动,那么在附近的字体会被环绕在浮动元素,这时候就需要BFC去 防止这种字体包裹,BFC会隔开一个新区域,防止重叠

4. 多列布局中, 解决元素下移问题

   如果我们建立3列布局,在最后一个列长度超出父容器宽度时,会直接**掉到下一行**,这个时候可以在最后一个元素中加入新BFC,从而做到不换行.

5. 自适应两栏布局

   通常两栏布局都是左边使用```float: left``` ,去实现,但是右边的一栏会覆盖到左边,因为需要在右边的一栏里加入BFC来实现(与第3点相似)

### 如何使用

使用```overflow``` 或其他方法创建BFC时会有问题. 首先这些属性并不是为了新建BFC,它们只是因为有```副作用(Side Effect)```  从而生成BFC. 其次语义上说不通, 开发人员会感到代码的作用有误.  

所以我们创建BFC时,应该使用```display:flow-root``` ,这是一个定制的创建BFC的方法,它是安全的,没有副作用的. 可以解决文章关于BFC部分的问题. 唯一缺陷是支持的浏览器目前不算多.